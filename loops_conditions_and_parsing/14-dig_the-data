#!/usr/bin/env bash
# Display the number of occurrences of each (IP, HTTP status code) pair in apache-access.log

awk '
  $1 ~ /^[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*$/ &&
  $9 ~ /^[0-9][0-9][0-9]$/ {
    print $1, $9
  }
' apache-access.log \
| sort \
| uniq -c \
| sort -k1,1nr -k2,2 -k3,3 \
| awk '{ print $1, $2, $3 }'
